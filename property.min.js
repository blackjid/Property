Subscription=function(d,b,c,a){this._target=d;this._eventType=b;this._listener=c;this._context=a;this._active=true};Subscription.prototype.cancel=function(){if(!this._active){return}this._target.unbind(this._eventType,this._listener,this._context);this._active=false};Observable={bind:function(b,d,a){this._listeners=this._listeners||{};var c=this._listeners[b]=this._listeners[b]||[];c.push([d,a]);return new Subscription(this,b,d,a)},trigger:function(b){if(!this._listeners){return}var c=this._listeners[b];if(!c){return}var a=arguments;_.each(c,function(d){d[0].apply(d[1],_.rest(a))})},unbind:function(c,e,b){if(!this._listeners){return}var d=this._listeners[c];if(!d){return}var a=d.length;while(a--){if(d[a][0]===e&&d[a][1]===b){d.splice(a,1)}}}};function property(a){this.value=a;$.extend(this,Observable)}property.prototype.__onChange__=function(a,b){this.bind("change",a,b);a.call(b,this.value);return this};property.prototype.set=function(b){var a=this.value;if(this.value!=b){this.value=b;this.trigger("change",b,a)}};property.prototype.is=function(a){return(this.value==a)};property.prototype.bindClass=function(a,c,b){return this.__onChange__(function(e){var d=(_.isFunction(c))?c:function(f){return c==f};$(a).toggleClass(b,d(e))})};property.prototype.toggleAttr=function(b,a){var c=this;$(b).change(function(){c.set($(this).attr(a))});return this.__onChange__(function(d){if(d){$(b).attr(a,true)}else{$(b).removeAttr(a)}})};property.prototype.toggleClass=function(a,b){return this.__onChange__(function(c){$(a).toggleClass(b+"-on",c);$(a).toggleClass(b+"-off",!c)})};property.prototype.prefixClass=function(a,b){return this.__onChange__(function(d,c){$(a).toggleClass(b+"-"+c,false);$(a).toggleClass(b+"-"+d,true)})};property.prototype.change=function(b,a){this.bind("change",b,a);return this};property.prototype.when=function(b,c,a){this.bind("change",function(d){if(_.isFunction(b)){if(b(d)){c.call(a)}}else{if(b===d){c.call(a)}}},a);return this};property.prototype.toggle=function(){this.set(!this.value)};property.prototype.toggleVisibility=function(a,b){return this.__onChange__(function(e,c){var d=(_.isFunction(b))?b:function(f){return b==f};if(d(c)){$(a).hide()}if(d(e)){$(a).show()}})};property.prototype.destruct=function(){};